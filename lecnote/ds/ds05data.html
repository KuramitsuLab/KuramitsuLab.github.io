

<!DOCTYPE html>
<html class="writer-html5" lang="ja" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>5. データの傾向をつかもう &mdash; Python &amp; Data Science 2021  ドキュメント</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/translations.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="検索" href="search.html" />
    <link rel="next" title="6. クラスタリングしてみよう" href="ds06classfy.html" />
    <link rel="prev" title="4. 表データとPandasを使いこなそう" href="ds04pandas.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Python & Data Science 2021
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="ds01intro.html">1. Python とデータサイエンス</a></li>
<li class="toctree-l1"><a class="reference internal" href="ds02sympy.html">2. 計算はPythonにさせてしまおう</a></li>
<li class="toctree-l1"><a class="reference internal" href="ds03numpy.html">3. NumPyとグラフ</a></li>
<li class="toctree-l1"><a class="reference internal" href="ds04pandas.html">4. 表データとPandasを使いこなそう</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">5. データの傾向をつかもう</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#データ入手">5.1. データ入手</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#データの内容確認">5.1.1. データの内容確認</a></li>
<li class="toctree-l3"><a class="reference internal" href="#データの属性を確認する">5.1.2. データの属性を確認する</a></li>
<li class="toctree-l3"><a class="reference internal" href="#データの形式を確認する">5.1.3. データの形式を確認する</a></li>
<li class="toctree-l3"><a class="reference internal" href="#カテゴリデータの確認">5.1.4. カテゴリデータの確認</a></li>
<li class="toctree-l3"><a class="reference internal" href="#数値データの要約">5.1.5. 数値データの要約</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#可視化">5.2. 可視化</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#箱ひげ図">5.2.1. 箱ひげ図</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ヒストグラム">5.2.2. ヒストグラム</a></li>
<li class="toctree-l3"><a class="reference internal" href="#散布図と相関係数">5.2.3. 散布図と相関係数</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#線形近似（予習）">線形近似（予習）</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#可視化（プロの技）">5.3. 可視化（プロの技）</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#相関行列とヒートマップ">5.3.1. 相関行列とヒートマップ</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ヒストグラムと散布図をまとめて書く">5.3.2. ヒストグラムと散布図をまとめて書く</a></li>
<li class="toctree-l3"><a class="reference internal" href="#カテゴリーデータを視覚化する">5.3.3. カテゴリーデータを視覚化する</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#コースワーク">5.4. コースワーク</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ds06classfy.html">6. クラスタリングしてみよう</a></li>
<li class="toctree-l1"><a class="reference internal" href="ds07reg.html">7. 回帰：線形近似から予測する</a></li>
<li class="toctree-l1"><a class="reference internal" href="ds08ml.html">8. 機械学習とクラス分類問題</a></li>
<li class="toctree-l1"><a class="reference internal" href="ds09ds.html">9. データ・サイエンティストへの道</a></li>
<li class="toctree-l1"><a class="reference internal" href="ds10nw.html">10. ニューラル・ネットワーク</a></li>
<li class="toctree-l1"><a class="reference internal" href="ds11deep.html">11. 深層学習と画像認識</a></li>
<li class="toctree-l1"><a class="reference internal" href="ds12nlp.html">12. 自然言語処理にむけて</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Python & Data Science 2021</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li><span class="section-number">5. </span>データの傾向をつかもう</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/ds05data.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="データの傾向をつかもう">
<h1><span class="section-number">5. </span>データの傾向をつかもう<a class="headerlink" href="#データの傾向をつかもう" title="このヘッドラインへのパーマリンク">¶</a></h1>
<p>いよいよ、データを使って統計分析する手法を学んでいきます。</p>
<p>今回は、Pandas と グラフ描画を組み合わせて、データの可視化による分析を学びます。</p>
<p><strong>モジュールの準備</strong></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">japanize_matplotlib</span> <span class="c1">#matplotlibの日本語化</span>
<span class="k">except</span> <span class="ne">ModuleNotFoundError</span><span class="p">:</span>
    <span class="o">!</span>pip install japanize_matplotlib
    <span class="kn">import</span> <span class="nn">japanize_matplotlib</span>
<span class="n">sns</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">font</span><span class="o">=</span><span class="s2">&quot;IPAexGothic&quot;</span><span class="p">)</span> <span class="c1">#日本語フォント設定</span>

</pre></div>
</div>
</div>
<div class="section" id="データ入手">
<h2><span class="section-number">5.1. </span>データ入手<a class="headerlink" href="#データ入手" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>今回は、<a class="reference external" href="https://archive.ics.uci.edu/ml/datasets/student+performance">ポルトガルの高校生の数学の成績データ</a>を使って、データ解析をします。</p>
<p><img alt="1df0234e2f204f37bfc7652584c15edb" class="no-scaled-link" src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/57754/315e0d53-5fed-3f10-db50-eda9ece4f5f9.jpeg" style="width: 40%;" /></p>
<p><strong>データの取り寄せ</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>!wget https://kuramitsulab.github.io/data/student-mat.csv
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title fa fa-exclamation-circle">wget</p>
<p>URLからファイルをダウンロードするUNIXコマンドです。 Colab上にファイルをアップロードするとき、重宝します。</p>
</div>
<div class="section" id="データの内容確認">
<h3><span class="section-number">5.1.1. </span>データの内容確認<a class="headerlink" href="#データの内容確認" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">student-mat.csv</span></code>をデータフレームとして読み込みます。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;./student-mat.csv&#39;</span><span class="p">)</span>
<span class="n">data</span><span class="o">.</span><span class="n">head</span><span class="p">()</span> <span class="c1">#最初の5行を確認</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>school</th>
      <th>sex</th>
      <th>age</th>
      <th>address</th>
      <th>famsize</th>
      <th>Pstatus</th>
      <th>Medu</th>
      <th>Fedu</th>
      <th>Mjob</th>
      <th>Fjob</th>
      <th>...</th>
      <th>famrel</th>
      <th>freetime</th>
      <th>goout</th>
      <th>Dalc</th>
      <th>Walc</th>
      <th>health</th>
      <th>absences</th>
      <th>G1</th>
      <th>G2</th>
      <th>G3</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>GP</td>
      <td>F</td>
      <td>18</td>
      <td>U</td>
      <td>GT3</td>
      <td>A</td>
      <td>4</td>
      <td>4</td>
      <td>at_home</td>
      <td>teacher</td>
      <td>...</td>
      <td>4</td>
      <td>3</td>
      <td>4</td>
      <td>1</td>
      <td>1</td>
      <td>3</td>
      <td>6</td>
      <td>5</td>
      <td>6</td>
      <td>6</td>
    </tr>
    <tr>
      <th>1</th>
      <td>GP</td>
      <td>F</td>
      <td>17</td>
      <td>U</td>
      <td>GT3</td>
      <td>T</td>
      <td>1</td>
      <td>1</td>
      <td>at_home</td>
      <td>other</td>
      <td>...</td>
      <td>5</td>
      <td>3</td>
      <td>3</td>
      <td>1</td>
      <td>1</td>
      <td>3</td>
      <td>4</td>
      <td>5</td>
      <td>5</td>
      <td>6</td>
    </tr>
    <tr>
      <th>2</th>
      <td>GP</td>
      <td>F</td>
      <td>15</td>
      <td>U</td>
      <td>LE3</td>
      <td>T</td>
      <td>1</td>
      <td>1</td>
      <td>at_home</td>
      <td>other</td>
      <td>...</td>
      <td>4</td>
      <td>3</td>
      <td>2</td>
      <td>2</td>
      <td>3</td>
      <td>3</td>
      <td>10</td>
      <td>7</td>
      <td>8</td>
      <td>10</td>
    </tr>
    <tr>
      <th>3</th>
      <td>GP</td>
      <td>F</td>
      <td>15</td>
      <td>U</td>
      <td>GT3</td>
      <td>T</td>
      <td>4</td>
      <td>2</td>
      <td>health</td>
      <td>services</td>
      <td>...</td>
      <td>3</td>
      <td>2</td>
      <td>2</td>
      <td>1</td>
      <td>1</td>
      <td>5</td>
      <td>2</td>
      <td>15</td>
      <td>14</td>
      <td>15</td>
    </tr>
    <tr>
      <th>4</th>
      <td>GP</td>
      <td>F</td>
      <td>16</td>
      <td>U</td>
      <td>GT3</td>
      <td>T</td>
      <td>3</td>
      <td>3</td>
      <td>other</td>
      <td>other</td>
      <td>...</td>
      <td>4</td>
      <td>3</td>
      <td>2</td>
      <td>1</td>
      <td>2</td>
      <td>5</td>
      <td>4</td>
      <td>6</td>
      <td>10</td>
      <td>10</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 33 columns</p>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">data</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span> <span class="c1"># 最後の5行を確認</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>school</th>
      <th>sex</th>
      <th>age</th>
      <th>address</th>
      <th>famsize</th>
      <th>Pstatus</th>
      <th>Medu</th>
      <th>Fedu</th>
      <th>Mjob</th>
      <th>Fjob</th>
      <th>...</th>
      <th>famrel</th>
      <th>freetime</th>
      <th>goout</th>
      <th>Dalc</th>
      <th>Walc</th>
      <th>health</th>
      <th>absences</th>
      <th>G1</th>
      <th>G2</th>
      <th>G3</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>390</th>
      <td>MS</td>
      <td>M</td>
      <td>20</td>
      <td>U</td>
      <td>LE3</td>
      <td>A</td>
      <td>2</td>
      <td>2</td>
      <td>services</td>
      <td>services</td>
      <td>...</td>
      <td>5</td>
      <td>5</td>
      <td>4</td>
      <td>4</td>
      <td>5</td>
      <td>4</td>
      <td>11</td>
      <td>9</td>
      <td>9</td>
      <td>9</td>
    </tr>
    <tr>
      <th>391</th>
      <td>MS</td>
      <td>M</td>
      <td>17</td>
      <td>U</td>
      <td>LE3</td>
      <td>T</td>
      <td>3</td>
      <td>1</td>
      <td>services</td>
      <td>services</td>
      <td>...</td>
      <td>2</td>
      <td>4</td>
      <td>5</td>
      <td>3</td>
      <td>4</td>
      <td>2</td>
      <td>3</td>
      <td>14</td>
      <td>16</td>
      <td>16</td>
    </tr>
    <tr>
      <th>392</th>
      <td>MS</td>
      <td>M</td>
      <td>21</td>
      <td>R</td>
      <td>GT3</td>
      <td>T</td>
      <td>1</td>
      <td>1</td>
      <td>other</td>
      <td>other</td>
      <td>...</td>
      <td>5</td>
      <td>5</td>
      <td>3</td>
      <td>3</td>
      <td>3</td>
      <td>3</td>
      <td>3</td>
      <td>10</td>
      <td>8</td>
      <td>7</td>
    </tr>
    <tr>
      <th>393</th>
      <td>MS</td>
      <td>M</td>
      <td>18</td>
      <td>R</td>
      <td>LE3</td>
      <td>T</td>
      <td>3</td>
      <td>2</td>
      <td>services</td>
      <td>other</td>
      <td>...</td>
      <td>4</td>
      <td>4</td>
      <td>1</td>
      <td>3</td>
      <td>4</td>
      <td>5</td>
      <td>0</td>
      <td>11</td>
      <td>12</td>
      <td>10</td>
    </tr>
    <tr>
      <th>394</th>
      <td>MS</td>
      <td>M</td>
      <td>19</td>
      <td>U</td>
      <td>LE3</td>
      <td>T</td>
      <td>1</td>
      <td>1</td>
      <td>other</td>
      <td>at_home</td>
      <td>...</td>
      <td>3</td>
      <td>2</td>
      <td>3</td>
      <td>3</td>
      <td>3</td>
      <td>5</td>
      <td>5</td>
      <td>8</td>
      <td>9</td>
      <td>9</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 33 columns</p>
</div></div>
</div>
</div>
<div class="section" id="データの属性を確認する">
<h3><span class="section-number">5.1.2. </span>データの属性を確認する<a class="headerlink" href="#データの属性を確認する" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>新しいデータをロードしたとき、最初に行うことは<strong>データの属性</strong>を確認することです。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 30%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>属性名</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">school</span></code></p></td>
<td><p>学校名</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">sex</span></code></p></td>
<td><p>性別 <code class="docutils literal notranslate"><span class="pre">F</span></code>: 女性, <code class="docutils literal notranslate"><span class="pre">M</span></code>: 男性</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">age</span></code></p></td>
<td><p>年齢</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">address</span></code></p></td>
<td><p>居住地 <code class="docutils literal notranslate"><span class="pre">U</span></code>: 都市部, <code class="docutils literal notranslate"><span class="pre">R</span></code>: 地方</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">famsize</span></code></p></td>
<td><p>家族の人数</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Pstatus</span></code></p></td>
<td><p>同居 <code class="docutils literal notranslate"><span class="pre">T</span></code>: 同居, <code class="docutils literal notranslate"><span class="pre">A</span></code>: 寮</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Medu</span></code></p></td>
<td><p>母親の学歴</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Fedu</span></code></p></td>
<td><p>父親の学歴</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Mjob</span></code></p></td>
<td><p>母親の職業</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Fjob</span></code></p></td>
<td><p>父親の職業</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">reason</span></code></p></td>
<td><p>学校を選んだ理由</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">guardian</span></code></p></td>
<td><p>保護者は誰か？</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">traveltime</span></code></p></td>
<td><p>通学時間</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">studytime</span></code></p></td>
<td><p>週の勉強時間</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">failures</span></code></p></td>
<td><p>過去の落第数</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">schoolsup</span></code></p></td>
<td><p>補修</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">famsup</span></code></p></td>
<td><p>家族からのサポート</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">paid</span></code></p></td>
<td><p>塾</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">activities</span></code></p></td>
<td><p>部活動</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">nursery</span></code></p></td>
<td><p>保育園</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">higher</span></code></p></td>
<td><p>高等教育</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">internet</span></code></p></td>
<td><p>インターネット接続</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">romantic</span></code></p></td>
<td><p>恋人</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">famrel</span></code></p></td>
<td><p>家族関係</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">freetime</span></code></p></td>
<td><p>自由時間</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">goout</span></code></p></td>
<td><p>友人と遊ぶ頻度</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Dalc</span></code></p></td>
<td><p>平日のアルコール量</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Walc</span></code></p></td>
<td><p>週末のアルコール量</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">health</span></code></p></td>
<td><p>健康状態</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">absense</span></code></p></td>
<td><p>欠席数</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">G1</span></code></p></td>
<td><p>一学期の成績 (０〜２０)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">G2</span></code></p></td>
<td><p>二学期の成績 (０〜２０)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">G3</span></code></p></td>
<td><p>最終成績 (０〜２０)</p></td>
</tr>
</tbody>
</table>
<p>ポルトガルの高校なので、日本人の感覚からすると？？？なところもありますが、 上記の情報が含まれています。</p>
<div class="admonition note">
<p class="admonition-title fa fa-exclamation-circle">ここからのミッション</p>
<p>高校生の各属性が数学の成績(G1, G2, G3)、特に最終成績(G3)に与える影響を調べていきましょう。 (ちなみに、<code class="docutils literal notranslate"><span class="pre">G3</span></code>が0.0の学生は、ドロップアウトしてしまった学生です。エラーではありません。)</p>
</div>
</div>
<div class="section" id="データの形式を確認する">
<h3><span class="section-number">5.1.3. </span>データの形式を確認する<a class="headerlink" href="#データの形式を確認する" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>データの属性を確認したら、次は属性がどのような形式で入っているか確認します。</p>
<p>データの<code class="docutils literal notranslate"><span class="pre">.info()</span></code>を呼ぶと、属性とデータ形式のリストを表示してくれます。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">data</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 395 entries, 0 to 394
Data columns (total 33 columns):
 #   Column      Non-Null Count  Dtype
---  ------      --------------  -----
 0   school      395 non-null    object
 1   sex         395 non-null    object
 2   age         395 non-null    int64
 3   address     395 non-null    object
 4   famsize     395 non-null    object
 5   Pstatus     395 non-null    object
 6   Medu        395 non-null    int64
 7   Fedu        395 non-null    int64
 8   Mjob        395 non-null    object
 9   Fjob        395 non-null    object
 10  reason      395 non-null    object
 11  guardian    395 non-null    object
 12  traveltime  395 non-null    int64
 13  studytime   395 non-null    int64
 14  failures    395 non-null    int64
 15  schoolsup   395 non-null    object
 16  famsup      395 non-null    object
 17  paid        395 non-null    object
 18  activities  395 non-null    object
 19  nursery     395 non-null    object
 20  higher      395 non-null    object
 21  internet    395 non-null    object
 22  romantic    395 non-null    object
 23  famrel      395 non-null    int64
 24  freetime    395 non-null    int64
 25  goout       395 non-null    int64
 26  Dalc        395 non-null    int64
 27  Walc        395 non-null    int64
 28  health      395 non-null    int64
 29  absences    395 non-null    int64
 30  G1          395 non-null    int64
 31  G2          395 non-null    int64
 32  G3          395 non-null    int64
dtypes: int64(16), object(17)
memory usage: 102.0+ KB
</pre></div></div>
</div>
<p>データの属性名に続いて、データの個数、さらに形式が<code class="docutils literal notranslate"><span class="pre">int64</span></code>か<code class="docutils literal notranslate"><span class="pre">object</span></code>か示されています。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">int64</span></code>: 数値データ</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">object</span></code>: 文字列データ</p></li>
</ul>
<p>重要なのは、<strong>数値データ（量的データ）</strong>、<strong>カテゴリデータ（質的データ）</strong>を区別することです。</p>
<ul class="simple">
<li><p><strong>数値データ</strong>: 量が数値によって連続的に表現されるデータであり、基本的に比較可能。（例. 人数や金額など)</p></li>
<li><p><strong>カテゴリデータ</strong>: カテゴリやグループを表す不連続のデータ</p></li>
</ul>
<p>少し注意したいのは、カテゴリデータであっても、カテゴリの種類が数値で表現されていると、<code class="docutils literal notranslate"><span class="pre">int64</span></code>形式となります。 同じく、カテゴリデータであっても、論理値などの比較可能な数値に変換できるものがあります。</p>
<p><code class="docutils literal notranslate"><span class="pre">Medu</span></code>や<code class="docutils literal notranslate"><span class="pre">Fedu</span></code>は、カテゴリの種類が数値で入っていますが、数値データ(<code class="docutils literal notranslate"><span class="pre">int64</span></code>)と解釈されていますが、カテゴリデータとして処理したいなら、型を<code class="docutils literal notranslate"><span class="pre">object</span></code>に変更しておくとよいでしょう。</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Medu&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;Medu&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;object&#39;</span><span class="p">)</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;Fedu&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;Fedu&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;object&#39;</span><span class="p">)</span>

</pre></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title fa fa-exclamation-circle">カテゴリから数値データへの変換</p>
<p>次のように<code class="docutils literal notranslate"><span class="pre">.map()</span></code>を行えば、カテゴリーデータも数値データに変換できます。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;school&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;school&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">({</span><span class="s1">&#39;GP&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;MS&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">})</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;sex&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;sex&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">({</span><span class="s1">&#39;M&#39;</span><span class="p">:</span><span class="mi">0</span> <span class="p">,</span><span class="s1">&#39;F&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">})</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;address&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;address&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">({</span><span class="s1">&#39;R&#39;</span><span class="p">:</span><span class="mi">0</span> <span class="p">,</span><span class="s1">&#39;U&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">})</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;famsize&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;famsize&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">({</span><span class="s1">&#39;LE3&#39;</span><span class="p">:</span><span class="mi">0</span> <span class="p">,</span><span class="s1">&#39;GT3&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">})</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;Pstatus&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Pstatus&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">({</span><span class="s1">&#39;A&#39;</span><span class="p">:</span><span class="mi">0</span> <span class="p">,</span><span class="s1">&#39;T&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">})</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;Mjob&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Mjob&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">({</span><span class="s1">&#39;at_home&#39;</span><span class="p">:</span><span class="mi">0</span> <span class="p">,</span><span class="s1">&#39;services&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;teacher&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;health&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;other&#39;</span><span class="p">:</span><span class="mi">4</span><span class="p">})</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;Fjob&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Fjob&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">({</span><span class="s1">&#39;at_home&#39;</span><span class="p">:</span><span class="mi">0</span> <span class="p">,</span><span class="s1">&#39;services&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;teacher&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;health&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;other&#39;</span><span class="p">:</span><span class="mi">4</span><span class="p">})</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;famsup&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;famsup&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">({</span><span class="s1">&#39;no&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;yes&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">})</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;reason&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;reason&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">({</span><span class="s1">&#39;course&#39;</span><span class="p">:</span><span class="mi">0</span> <span class="p">,</span><span class="s1">&#39;home&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;reputation&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;other&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">})</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;guardian&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;guardian&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">({</span><span class="s1">&#39;mother&#39;</span><span class="p">:</span><span class="mi">0</span> <span class="p">,</span><span class="s1">&#39;father&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;other&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">})</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;schoolsup&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;schoolsup&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">({</span><span class="s1">&#39;no&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;yes&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">})</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;paid&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;paid&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">({</span><span class="s1">&#39;no&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;yes&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">})</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;activities&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;activities&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">({</span><span class="s1">&#39;no&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;yes&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">})</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;nursery&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;nursery&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">({</span><span class="s1">&#39;no&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;yes&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">})</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;higher&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;higher&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">({</span><span class="s1">&#39;no&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;yes&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">})</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;internet&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;internet&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">({</span><span class="s1">&#39;no&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;yes&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">})</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;romantic&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;romantic&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">({</span><span class="s1">&#39;no&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;yes&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">})</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="カテゴリデータの確認">
<h3><span class="section-number">5.1.4. </span>カテゴリデータの確認<a class="headerlink" href="#カテゴリデータの確認" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">data.dtypes</span></code>が<code class="docutils literal notranslate"><span class="pre">object</span></code>あるものをカテゴリデータとみなして、 カテゴリデータの属性リストを取り出しています。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># カテゴリデータのリストを取り出す</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">dtypes</span><span class="p">[</span><span class="n">data</span><span class="o">.</span><span class="n">dtypes</span> <span class="o">==</span> <span class="s1">&#39;object&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">))</span>

</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#39;school&#39;, &#39;sex&#39;, &#39;address&#39;, &#39;famsize&#39;, &#39;Pstatus&#39;, &#39;Medu&#39;, &#39;Fedu&#39;, &#39;Mjob&#39;, &#39;Fjob&#39;, &#39;reason&#39;, &#39;guardian&#39;, &#39;schoolsup&#39;, &#39;famsup&#39;, &#39;paid&#39;, &#39;activities&#39;, &#39;nursery&#39;, &#39;higher&#39;, &#39;internet&#39;, &#39;romantic&#39;]
</pre></div></div>
</div>
<p>各カテゴリデータがどのような値が含まれるか、調べます。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># カテゴリデータの値の調べる</span>
<span class="k">for</span> <span class="n">cat_feat</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">dtypes</span><span class="p">[</span><span class="n">data</span><span class="o">.</span><span class="n">dtypes</span> <span class="o">==</span> <span class="s1">&#39;object&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">cat_feat</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">cat_feat</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">())</span>
    <span class="nb">print</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
school
GP    349
MS     46
Name: school, dtype: int64

sex
F    208
M    187
Name: sex, dtype: int64

address
U    307
R     88
Name: address, dtype: int64

famsize
GT3    281
LE3    114
Name: famsize, dtype: int64

Pstatus
T    354
A     41
Name: Pstatus, dtype: int64

Medu
4    131
2    103
3     99
1     59
0      3
Name: Medu, dtype: int64

Fedu
2    115
3    100
4     96
1     82
0      2
Name: Fedu, dtype: int64

Mjob
other       141
services    103
at_home      59
teacher      58
health       34
Name: Mjob, dtype: int64

Fjob
other       217
services    111
teacher      29
at_home      20
health       18
Name: Fjob, dtype: int64

reason
course        145
home          109
reputation    105
other          36
Name: reason, dtype: int64

guardian
mother    273
father     90
other      32
Name: guardian, dtype: int64

schoolsup
no     344
yes     51
Name: schoolsup, dtype: int64

famsup
yes    242
no     153
Name: famsup, dtype: int64

paid
no     214
yes    181
Name: paid, dtype: int64

activities
yes    201
no     194
Name: activities, dtype: int64

nursery
yes    314
no      81
Name: nursery, dtype: int64

higher
yes    375
no      20
Name: higher, dtype: int64

internet
yes    329
no      66
Name: internet, dtype: int64

romantic
no     263
yes    132
Name: romantic, dtype: int64

</pre></div></div>
</div>
<div class="admonition warning">
<p class="admonition-title fa fa-exclamation-circle">Pandas 力をあげるためには？</p>
<p>Pandas は高機能で、Google で調べるといってもなかなか求めている機能を探すことが難しいです。 最初のうちは、よくわからないコードが出てきたら、地道にひとつずつ動きを確認するようにしましょう。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">data</span><span class="o">.</span><span class="n">dtypes</span>
<span class="n">data</span><span class="o">.</span><span class="n">dtypes</span> <span class="o">==</span> <span class="s1">&#39;object&#39;</span>
<span class="n">data</span><span class="o">.</span><span class="n">dtypes</span><span class="p">[</span><span class="n">data</span><span class="o">.</span><span class="n">dtypes</span> <span class="o">==</span> <span class="s1">&#39;object&#39;</span><span class="p">]</span>
<span class="n">data</span><span class="o">.</span><span class="n">dtypes</span><span class="p">[</span><span class="n">data</span><span class="o">.</span><span class="n">dtypes</span> <span class="o">==</span> <span class="s1">&#39;object&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">index</span>
</pre></div>
</div>
<p>こういう地道な努力がプログラミング向上に繋がります。</p>
</div>
</div>
<div class="section" id="数値データの要約">
<h3><span class="section-number">5.1.5. </span>数値データの要約<a class="headerlink" href="#数値データの要約" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">describe()</span></code>は、数値データの基礎統計量を集計するメソッドです。</p>
<p><strong>基礎統計量</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">count</span></code>: データ数</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mean</span></code>: 平均値</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">std</span></code>: 標準偏差</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">min</span></code>: 最小値</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">25%</span></code>: 小さい方から25%目の値（第一四分位点）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">50%</span></code>: 中央値</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">75%</span></code>: 小さい方から75%目の値（第三四分位点）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">max</span></code>: 最大値</p></li>
</ul>
<p>ざっくりと傾向をみるとき、重宝します。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">data</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>age</th>
      <th>traveltime</th>
      <th>studytime</th>
      <th>failures</th>
      <th>famrel</th>
      <th>freetime</th>
      <th>goout</th>
      <th>Dalc</th>
      <th>Walc</th>
      <th>health</th>
      <th>absences</th>
      <th>G1</th>
      <th>G2</th>
      <th>G3</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>395.000000</td>
      <td>395.000000</td>
      <td>395.000000</td>
      <td>395.000000</td>
      <td>395.000000</td>
      <td>395.000000</td>
      <td>395.000000</td>
      <td>395.000000</td>
      <td>395.000000</td>
      <td>395.000000</td>
      <td>395.000000</td>
      <td>395.000000</td>
      <td>395.000000</td>
      <td>395.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>16.696203</td>
      <td>1.448101</td>
      <td>2.035443</td>
      <td>0.334177</td>
      <td>3.944304</td>
      <td>3.235443</td>
      <td>3.108861</td>
      <td>1.481013</td>
      <td>2.291139</td>
      <td>3.554430</td>
      <td>5.708861</td>
      <td>10.908861</td>
      <td>10.713924</td>
      <td>10.415190</td>
    </tr>
    <tr>
      <th>std</th>
      <td>1.276043</td>
      <td>0.697505</td>
      <td>0.839240</td>
      <td>0.743651</td>
      <td>0.896659</td>
      <td>0.998862</td>
      <td>1.113278</td>
      <td>0.890741</td>
      <td>1.287897</td>
      <td>1.390303</td>
      <td>8.003096</td>
      <td>3.319195</td>
      <td>3.761505</td>
      <td>4.581443</td>
    </tr>
    <tr>
      <th>min</th>
      <td>15.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>0.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>0.000000</td>
      <td>3.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>16.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>0.000000</td>
      <td>4.000000</td>
      <td>3.000000</td>
      <td>2.000000</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>3.000000</td>
      <td>0.000000</td>
      <td>8.000000</td>
      <td>9.000000</td>
      <td>8.000000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>17.000000</td>
      <td>1.000000</td>
      <td>2.000000</td>
      <td>0.000000</td>
      <td>4.000000</td>
      <td>3.000000</td>
      <td>3.000000</td>
      <td>1.000000</td>
      <td>2.000000</td>
      <td>4.000000</td>
      <td>4.000000</td>
      <td>11.000000</td>
      <td>11.000000</td>
      <td>11.000000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>18.000000</td>
      <td>2.000000</td>
      <td>2.000000</td>
      <td>0.000000</td>
      <td>5.000000</td>
      <td>4.000000</td>
      <td>4.000000</td>
      <td>2.000000</td>
      <td>3.000000</td>
      <td>5.000000</td>
      <td>8.000000</td>
      <td>13.000000</td>
      <td>13.000000</td>
      <td>14.000000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>22.000000</td>
      <td>4.000000</td>
      <td>4.000000</td>
      <td>3.000000</td>
      <td>5.000000</td>
      <td>5.000000</td>
      <td>5.000000</td>
      <td>5.000000</td>
      <td>5.000000</td>
      <td>5.000000</td>
      <td>75.000000</td>
      <td>19.000000</td>
      <td>19.000000</td>
      <td>20.000000</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</div>
</div>
<div class="section" id="可視化">
<h2><span class="section-number">5.2. </span>可視化<a class="headerlink" href="#可視化" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>表データは、数値や統計量だけみていても、データの傾向をつかめません。</p>
<div class="admonition note">
<p class="admonition-title fa fa-exclamation-circle">Let’s try</p>
<p>ここから例として、<code class="docutils literal notranslate"><span class="pre">G3</span></code>列を示しますが、他の属性も自分で調べてみましょう。</p>
</div>
<p>さて、それではMatplotlib を用いてデータの可視化していきましょう。</p>
<div class="section" id="箱ひげ図">
<h3><span class="section-number">5.2.1. </span>箱ひげ図<a class="headerlink" href="#箱ひげ図" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>箱ひげ図は、最大値、最小値、中央値、四分位範囲を視覚化してくれるグラフです。 ヒゲの上端が最大値、ヒゲの下端が最小値を示します。データの範囲がみえてきます。</p>
<p><strong>最終成績(G3)の統計量</strong></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;G3&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
count    395.000000
mean      10.415190
std        4.581443
min        0.000000
25%        8.000000
50%       11.000000
75%       14.000000
max       20.000000
Name: G3, dtype: float64
</pre></div></div>
</div>
<p><strong>最終成績(G3)の箱ヒゲ図</strong></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">plt</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;G3&#39;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/ds05data_23_0.svg" src="_images/ds05data_23_0.svg" /></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">## G1, G2, G3 と表示する例</span>
<span class="n">plt</span><span class="o">.</span><span class="n">boxplot</span><span class="p">([</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;G1&#39;</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;G2&#39;</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;G3&#39;</span><span class="p">]])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/ds05data_24_0.svg" src="_images/ds05data_24_0.svg" /></div>
</div>
<p>seaborn の<code class="docutils literal notranslate"><span class="pre">boxplot()</span></code>を用いれば、もう少しこった凝ったヒストグラムを描画できます。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Fjob&#39;</span><span class="p">],</span><span class="n">y</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;G3&#39;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;父親の仕事が子供の成績に与える影響&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;父親の仕事&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;成績&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/ds05data_26_0.svg" src="_images/ds05data_26_0.svg" /></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">## subplot を使った凝ったグラフ</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span> <span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">order_by</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;Fjob&#39;</span><span class="p">)[</span><span class="s1">&#39;G3&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">median</span><span class="p">()</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">index</span>
<span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;Fjob&#39;</span><span class="p">],</span> <span class="n">y</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;G3&#39;</span><span class="p">],</span><span class="n">order</span> <span class="o">=</span> <span class="n">order_by</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span> <span class="o">=</span> <span class="mi">90</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Fjob v/s G3&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="n">order_by</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;Mjob&#39;</span><span class="p">)[</span><span class="s1">&#39;G3&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">median</span><span class="p">()</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">index</span>
<span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;Mjob&#39;</span><span class="p">],</span> <span class="n">y</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;G3&#39;</span><span class="p">],</span><span class="n">order</span> <span class="o">=</span> <span class="n">order_by</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span> <span class="o">=</span> <span class="mi">90</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Mjob v/s G3&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/ds05data_27_0.svg" src="_images/ds05data_27_0.svg" /></div>
</div>
<div class="admonition note">
<p class="admonition-title fa fa-exclamation-circle">可視化の達人になるためには</p>
<p>皆さんから、先生のようにPandasやMatplotlibを使いこなせるようになりたいと言われますが、 過去に書いたグラフを直しながら、必要に応じてGoogleで調べて、書き直しているだけです。 とにかく、色々なグラフを書いて試してみて、 後で探しやすいようにColabのノートブックでライブラリを作っておきましょう。</p>
</div>
</div>
<div class="section" id="ヒストグラム">
<h3><span class="section-number">5.2.2. </span>ヒストグラム<a class="headerlink" href="#ヒストグラム" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>おなじみのヒストグラムも描画してみましょう。</p>
<p><strong>最終成績(G3)のヒストグラム</strong></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;G3&#39;</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="nb">range</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">21</span><span class="p">],</span> <span class="n">rwidth</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distribution of grades average of students&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;G3&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Count&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/ds05data_30_0.svg" src="_images/ds05data_30_0.svg" /></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">sns</span><span class="o">.</span><span class="n">countplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;G3&#39;</span><span class="p">],</span> <span class="n">palette</span><span class="o">=</span><span class="s1">&#39;gray_r&#39;</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">set_theme</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s2">&quot;whitegrid&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;G3&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Count&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/ds05data_31_0.svg" src="_images/ds05data_31_0.svg" /></div>
</div>
<p><strong>グループ分けされたヒストグラム</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">hue</span></code>を追加すると、カテゴリーごとに色分けされたヒストグラムが得られます。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">sns</span><span class="o">.</span><span class="n">countplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;G3&#39;</span><span class="p">,</span><span class="n">hue</span><span class="o">=</span><span class="s1">&#39;sex&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Students distribution according to G3 and sex&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;G3&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Count&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/ds05data_33_0.svg" src="_images/ds05data_33_0.svg" /></div>
</div>
<p><strong>カーネル密度推定法によるヒストグラム</strong></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>

<span></span><span class="n">sns</span><span class="o">.</span><span class="n">kdeplot</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;sex&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">get_group</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">)[</span><span class="s1">&#39;G3&#39;</span><span class="p">],</span> <span class="n">shade</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span><span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;male&#39;</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">kdeplot</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;sex&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">get_group</span><span class="p">(</span><span class="s1">&#39;F&#39;</span><span class="p">)[</span><span class="s1">&#39;G3&#39;</span><span class="p">],</span> <span class="n">shade</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;female&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;G3&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">% d</span><span class="s1">ata distribution&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/ds05data_35_0.svg" src="_images/ds05data_35_0.svg" /></div>
</div>
</div>
<div class="section" id="散布図と相関係数">
<h3><span class="section-number">5.2.3. </span>散布図と相関係数<a class="headerlink" href="#散布図と相関係数" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>ここまでは、基本的にひとつの属性に着目してきました。 データサイエンスや機械学習では、<strong>２つの属性間の関係性</strong>がより重要になります。</p>
<p>属性間の関係性により注目するため、散布図と相関係数を学びます。</p>
<p><strong>一学期の成績(G1)と最終成績(G3)</strong></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;G3&#39;</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;G1&#39;</span><span class="p">],</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;G3&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;G1&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/ds05data_37_0.svg" src="_images/ds05data_37_0.svg" /></div>
</div>
<p>第一学期から成績が良い学生が最終成績の成績がよくなる傾向がグラフから読み取ることができます。</p>
<p>この関係性を数値化する手法が、<a class="reference external" href="https://ja.wikipedia.org/wiki/相関係数">相関係数</a>です。</p>
<ul class="simple">
<li><p>1に近いほど、正の相関がある</p></li>
<li><p>0無相関</p></li>
<li><p>-1に近いほど、負の相関がある</p></li>
</ul>
<p>Python では、SciPy に含まれている<code class="docutils literal notranslate"><span class="pre">pearsonr</span></code>を使って相関係数を算出できます。</p>
<p><strong>G3とG1の相関係数</strong></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">scipy</span> <span class="k">as</span> <span class="nn">sp</span>
<span class="n">sp</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">pearsonr</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;G1&#39;</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;G3&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
(0.8014679320174141, 9.001430312277354e-90)
</pre></div></div>
</div>
<p>ひとつ目の値が相関係数です。（ふたつ目の値は、p値です。）</p>
<div class="admonition note">
<p class="admonition-title fa fa-exclamation-circle">p値</p>
<p>偶然、実際に反した数値が統計量として計算される確率です。p値が低いほど、ありえないことが起きたことになります。</p>
</div>
<div class="section" id="線形近似（予習）">
<h4>線形近似（予習）<a class="headerlink" href="#線形近似（予習）" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>成績G3とG1の関係を<span class="math notranslate nohighlight">\(y = ax + b\)</span>という線形近似をしてみます。</p>
<p>次回以降用いる機械学習モジュール<code class="docutils literal notranslate"><span class="pre">sklearn</span></code>を予習として用いて、 <a class="reference external" href="https://ja.wikipedia.org/wiki/最小二乗法">最小二乗法</a>によって、<span class="math notranslate nohighlight">\(a\)</span>(回帰係数)と<span class="math notranslate nohighlight">\(b\)</span>(切片)を求めます。</p>
<p><strong>線形近似</strong></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">sklearn</span> <span class="kn">import</span> <span class="n">linear_model</span>
<span class="n">reg</span> <span class="o">=</span> <span class="n">linear_model</span><span class="o">.</span><span class="n">LinearRegression</span><span class="p">()</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="s1">&#39;G3&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span>
<span class="n">Y</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;G1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
<span class="n">reg</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;a=&#39;</span><span class="p">,</span> <span class="n">reg</span><span class="o">.</span><span class="n">coef_</span><span class="p">,</span> <span class="s1">&#39;, b=&#39;</span><span class="p">,</span> <span class="n">reg</span><span class="o">.</span><span class="n">intercept_</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
a= [0.58065293] , b= 4.861250211993213
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;G3&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;G1&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">reg</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">)</span> <span class="c1"># y=ax+bを描画</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/ds05data_43_0.svg" src="_images/ds05data_43_0.svg" /></div>
</div>
<div class="admonition warning">
<p class="admonition-title fa fa-exclamation-circle">詳しくは</p>
<p><a class="reference external" href="ds07reg.html">第7回目 線形回帰</a>でもう一度勉強します。</p>
</div>
</div>
</div>
</div>
<div class="section" id="可視化（プロの技）">
<h2><span class="section-number">5.3. </span>可視化（プロの技）<a class="headerlink" href="#可視化（プロの技）" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>最後に、少しデータサイエンスの可視化テクニックを紹介します。</p>
<div class="section" id="相関行列とヒートマップ">
<h3><span class="section-number">5.3.1. </span>相関行列とヒートマップ<a class="headerlink" href="#相関行列とヒートマップ" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>相関行列は、すべての属性（数値データ間）で相関係数を計算した行列です。</p>
<p><strong>相関行列</strong></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">data</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>age</th>
      <th>traveltime</th>
      <th>studytime</th>
      <th>failures</th>
      <th>famrel</th>
      <th>freetime</th>
      <th>goout</th>
      <th>Dalc</th>
      <th>Walc</th>
      <th>health</th>
      <th>absences</th>
      <th>G1</th>
      <th>G2</th>
      <th>G3</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>age</th>
      <td>1.000000</td>
      <td>0.070641</td>
      <td>-0.004140</td>
      <td>0.243665</td>
      <td>0.053940</td>
      <td>0.016434</td>
      <td>0.126964</td>
      <td>0.131125</td>
      <td>0.117276</td>
      <td>-0.062187</td>
      <td>0.175230</td>
      <td>-0.064081</td>
      <td>-0.143474</td>
      <td>-0.161579</td>
    </tr>
    <tr>
      <th>traveltime</th>
      <td>0.070641</td>
      <td>1.000000</td>
      <td>-0.100909</td>
      <td>0.092239</td>
      <td>-0.016808</td>
      <td>-0.017025</td>
      <td>0.028540</td>
      <td>0.138325</td>
      <td>0.134116</td>
      <td>0.007501</td>
      <td>-0.012944</td>
      <td>-0.093040</td>
      <td>-0.153198</td>
      <td>-0.117142</td>
    </tr>
    <tr>
      <th>studytime</th>
      <td>-0.004140</td>
      <td>-0.100909</td>
      <td>1.000000</td>
      <td>-0.173563</td>
      <td>0.039731</td>
      <td>-0.143198</td>
      <td>-0.063904</td>
      <td>-0.196019</td>
      <td>-0.253785</td>
      <td>-0.075616</td>
      <td>-0.062700</td>
      <td>0.160612</td>
      <td>0.135880</td>
      <td>0.097820</td>
    </tr>
    <tr>
      <th>failures</th>
      <td>0.243665</td>
      <td>0.092239</td>
      <td>-0.173563</td>
      <td>1.000000</td>
      <td>-0.044337</td>
      <td>0.091987</td>
      <td>0.124561</td>
      <td>0.136047</td>
      <td>0.141962</td>
      <td>0.065827</td>
      <td>0.063726</td>
      <td>-0.354718</td>
      <td>-0.355896</td>
      <td>-0.360415</td>
    </tr>
    <tr>
      <th>famrel</th>
      <td>0.053940</td>
      <td>-0.016808</td>
      <td>0.039731</td>
      <td>-0.044337</td>
      <td>1.000000</td>
      <td>0.150701</td>
      <td>0.064568</td>
      <td>-0.077594</td>
      <td>-0.113397</td>
      <td>0.094056</td>
      <td>-0.044354</td>
      <td>0.022168</td>
      <td>-0.018281</td>
      <td>0.051363</td>
    </tr>
    <tr>
      <th>freetime</th>
      <td>0.016434</td>
      <td>-0.017025</td>
      <td>-0.143198</td>
      <td>0.091987</td>
      <td>0.150701</td>
      <td>1.000000</td>
      <td>0.285019</td>
      <td>0.209001</td>
      <td>0.147822</td>
      <td>0.075733</td>
      <td>-0.058078</td>
      <td>0.012613</td>
      <td>-0.013777</td>
      <td>0.011307</td>
    </tr>
    <tr>
      <th>goout</th>
      <td>0.126964</td>
      <td>0.028540</td>
      <td>-0.063904</td>
      <td>0.124561</td>
      <td>0.064568</td>
      <td>0.285019</td>
      <td>1.000000</td>
      <td>0.266994</td>
      <td>0.420386</td>
      <td>-0.009577</td>
      <td>0.044302</td>
      <td>-0.149104</td>
      <td>-0.162250</td>
      <td>-0.132791</td>
    </tr>
    <tr>
      <th>Dalc</th>
      <td>0.131125</td>
      <td>0.138325</td>
      <td>-0.196019</td>
      <td>0.136047</td>
      <td>-0.077594</td>
      <td>0.209001</td>
      <td>0.266994</td>
      <td>1.000000</td>
      <td>0.647544</td>
      <td>0.077180</td>
      <td>0.111908</td>
      <td>-0.094159</td>
      <td>-0.064120</td>
      <td>-0.054660</td>
    </tr>
    <tr>
      <th>Walc</th>
      <td>0.117276</td>
      <td>0.134116</td>
      <td>-0.253785</td>
      <td>0.141962</td>
      <td>-0.113397</td>
      <td>0.147822</td>
      <td>0.420386</td>
      <td>0.647544</td>
      <td>1.000000</td>
      <td>0.092476</td>
      <td>0.136291</td>
      <td>-0.126179</td>
      <td>-0.084927</td>
      <td>-0.051939</td>
    </tr>
    <tr>
      <th>health</th>
      <td>-0.062187</td>
      <td>0.007501</td>
      <td>-0.075616</td>
      <td>0.065827</td>
      <td>0.094056</td>
      <td>0.075733</td>
      <td>-0.009577</td>
      <td>0.077180</td>
      <td>0.092476</td>
      <td>1.000000</td>
      <td>-0.029937</td>
      <td>-0.073172</td>
      <td>-0.097720</td>
      <td>-0.061335</td>
    </tr>
    <tr>
      <th>absences</th>
      <td>0.175230</td>
      <td>-0.012944</td>
      <td>-0.062700</td>
      <td>0.063726</td>
      <td>-0.044354</td>
      <td>-0.058078</td>
      <td>0.044302</td>
      <td>0.111908</td>
      <td>0.136291</td>
      <td>-0.029937</td>
      <td>1.000000</td>
      <td>-0.031003</td>
      <td>-0.031777</td>
      <td>0.034247</td>
    </tr>
    <tr>
      <th>G1</th>
      <td>-0.064081</td>
      <td>-0.093040</td>
      <td>0.160612</td>
      <td>-0.354718</td>
      <td>0.022168</td>
      <td>0.012613</td>
      <td>-0.149104</td>
      <td>-0.094159</td>
      <td>-0.126179</td>
      <td>-0.073172</td>
      <td>-0.031003</td>
      <td>1.000000</td>
      <td>0.852118</td>
      <td>0.801468</td>
    </tr>
    <tr>
      <th>G2</th>
      <td>-0.143474</td>
      <td>-0.153198</td>
      <td>0.135880</td>
      <td>-0.355896</td>
      <td>-0.018281</td>
      <td>-0.013777</td>
      <td>-0.162250</td>
      <td>-0.064120</td>
      <td>-0.084927</td>
      <td>-0.097720</td>
      <td>-0.031777</td>
      <td>0.852118</td>
      <td>1.000000</td>
      <td>0.904868</td>
    </tr>
    <tr>
      <th>G3</th>
      <td>-0.161579</td>
      <td>-0.117142</td>
      <td>0.097820</td>
      <td>-0.360415</td>
      <td>0.051363</td>
      <td>0.011307</td>
      <td>-0.132791</td>
      <td>-0.054660</td>
      <td>-0.051939</td>
      <td>-0.061335</td>
      <td>0.034247</td>
      <td>0.801468</td>
      <td>0.904868</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>ご多分に漏れず、可視化しておくとデータ解析が行やすいです。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Correlation matrix</span>
<span class="n">corr</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">corr</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;AxesSubplot:&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/ds05data_48_1.svg" src="_images/ds05data_48_1.svg" /></div>
</div>
</div>
<div class="section" id="ヒストグラムと散布図をまとめて書く">
<h3><span class="section-number">5.3.2. </span>ヒストグラムと散布図をまとめて書く<a class="headerlink" href="#ヒストグラムと散布図をまとめて書く" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>seabornモジュールの<code class="docutils literal notranslate"><span class="pre">pairplot</span></code>を用いると、さまざまな属性の関係性を一度に確認できます。</p>
<ul class="simple">
<li><p>欠席数<code class="docutils literal notranslate"><span class="pre">absences</span></code></p></li>
<li><p>アルコール摂取量<code class="docutils literal notranslate"><span class="pre">Dalc</span></code></p></li>
<li><p>年齢<code class="docutils literal notranslate"><span class="pre">age</span></code></p></li>
<li><p>最終成績<code class="docutils literal notranslate"><span class="pre">G3</span></code></p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">sns</span><span class="o">.</span><span class="n">pairplot</span><span class="p">(</span><span class="n">data</span><span class="p">[[</span><span class="s1">&#39;absences&#39;</span><span class="p">,</span> <span class="s1">&#39;Dalc&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="s1">&#39;G3&#39;</span><span class="p">]])</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;seaborn.axisgrid.PairGrid at 0x13f141e50&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/ds05data_50_1.svg" src="_images/ds05data_50_1.svg" /></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">sns</span><span class="o">.</span><span class="n">pairplot</span><span class="p">(</span><span class="n">data</span><span class="p">[[</span><span class="s1">&#39;absences&#39;</span><span class="p">,</span> <span class="s1">&#39;Dalc&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="s1">&#39;G3&#39;</span><span class="p">,</span> <span class="s1">&#39;sex&#39;</span><span class="p">]],</span> <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;sex&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;seaborn.axisgrid.PairGrid at 0x13f867190&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/ds05data_51_1.svg" src="_images/ds05data_51_1.svg" /></div>
</div>
</div>
<div class="section" id="カテゴリーデータを視覚化する">
<h3><span class="section-number">5.3.3. </span>カテゴリーデータを視覚化する<a class="headerlink" href="#カテゴリーデータを視覚化する" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>カテゴリデータの分類がどのように散らばっているか一覧を作ります。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">15</span><span class="p">))</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">([</span><span class="s1">&#39;school&#39;</span><span class="p">,</span> <span class="s1">&#39;sex&#39;</span><span class="p">,</span> <span class="s1">&#39;famsize&#39;</span><span class="p">,</span> <span class="s1">&#39;Pstatus&#39;</span><span class="p">,</span> <span class="s1">&#39;Mjob&#39;</span><span class="p">,</span> <span class="s1">&#39;Fjob&#39;</span><span class="p">,</span>
       <span class="s1">&#39;reason&#39;</span><span class="p">,</span> <span class="s1">&#39;guardian&#39;</span><span class="p">,</span> <span class="s1">&#39;schoolsup&#39;</span><span class="p">,</span> <span class="s1">&#39;famsup&#39;</span><span class="p">,</span> <span class="s1">&#39;paid&#39;</span><span class="p">,</span> <span class="s1">&#39;activities&#39;</span><span class="p">,</span>
       <span class="s1">&#39;nursery&#39;</span><span class="p">,</span> <span class="s1">&#39;higher&#39;</span><span class="p">,</span> <span class="s1">&#39;internet&#39;</span><span class="p">,</span> <span class="s1">&#39;romantic&#39;</span><span class="p">]):</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">countplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">item</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/ds05data_53_0.svg" src="_images/ds05data_53_0.svg" /></div>
</div>
</div>
</div>
<div class="section" id="コースワーク">
<h2><span class="section-number">5.4. </span>コースワーク<a class="headerlink" href="#コースワーク" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="admonition tip"><p><strong>演習（ランチボックス）</strong></p>
<p>カフェフロアで販売されているお弁当の販売数のデータを可視化して、 販売数<code class="docutils literal notranslate"><span class="pre">y</span></code>を増やすため、特徴をつかんでみよう。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 29%" />
<col style="width: 71%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>属性</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>datetid</p></td>
<td><p>インデックスとして使用する日付</p></td>
</tr>
<tr class="row-odd"><td><p>y</p></td>
<td><p>販売数</p></td>
</tr>
<tr class="row-even"><td><p>week</p></td>
<td><p>曜日（月～金）</p></td>
</tr>
<tr class="row-odd"><td><p>soldout</p></td>
<td><p>完売フラグ（0:完売せず、1:完売）</p></td>
</tr>
<tr class="row-even"><td><p>name</p></td>
<td><p>メインメニュー</p></td>
</tr>
<tr class="row-odd"><td><p>kcal</p></td>
<td><p>おかずのカロリー（kcal）</p></td>
</tr>
<tr class="row-even"><td><p>remarks</p></td>
<td><p>特記事項</p></td>
</tr>
<tr class="row-odd"><td><p>event</p></td>
<td><p>社内イベント</p></td>
</tr>
<tr class="row-even"><td><p>payday</p></td>
<td><p>給料日フラグ（1:給料日）</p></td>
</tr>
<tr class="row-odd"><td><p>weather</p></td>
<td><p>天気</p></td>
</tr>
<tr class="row-even"><td><p>precipitation</p></td>
<td><p>降水量</p></td>
</tr>
<tr class="row-odd"><td><p>temperature</p></td>
<td><p>気温</p></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p>販売数<code class="docutils literal notranslate"><span class="pre">y</span></code>の影響を与える属性は？</p></li>
<li><p>販売数<code class="docutils literal notranslate"><span class="pre">y</span></code></p></li>
</ul>
</div><p><strong>データの入手方法</strong></p>
<p><a class="reference external" href="https://signate.jp/competitions/24">SIGNATE社のコンテスト用データ</a>を 利用させていただきます。データの入手法の詳細は授業中に紹介します。</p>
<!--
! wget http://kuramitsulab.github.io/data/bento_train.csv
! wget http://kuramitsulab.github.io/data/bento_test.csv
--></div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="ds06classfy.html" class="btn btn-neutral float-right" title="6. クラスタリングしてみよう" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="ds04pandas.html" class="btn btn-neutral float-left" title="4. 表データとPandasを使いこなそう" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, 倉光君郎(Kimio Kuramitsu).

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>