
<!DOCTYPE html>

<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>6. 関数、再帰関数、そして高階関数 &#8212; Python Programming 2021  ドキュメント</title>
    
  <link href="_static/css/theme.css" rel="stylesheet" />
  <link href="_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/sphinx-book-theme.acff12b8f9c144ce68a297486a2fa670.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    
  <link rel="preload" as="script" href="_static/js/index.1c5a1a01449ed65a7b51.js">

    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/translations.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="検索" href="search.html" />
    <link rel="next" title="7. プログラミング上達のコツ" href="py06tips.html" />
    <link rel="prev" title="5. 文字と情報" href="py05string.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
      
      <h1 class="site-logo" id="site-title">Python Programming 2021  ドキュメント</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="ドキュメントを検索..." aria-label="ドキュメントを検索..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <div class="bd-toc-item active">
        <p class="caption">
 <span class="caption-text">
  Contents:
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="py01oj.html">
   1. プログラミングの練習を始めよう
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="py02eval.html">
   2. 変数を評価する
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="py03if.html">
   3. 条件によって動作を変える
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="py04forlist.html">
   4. リストと繰り返し
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="py05string.html">
   5. 文字と情報
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   6. 関数、再帰関数、そして高階関数
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="py06tips.html">
   7. プログラミング上達のコツ
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="py08algo.html">
   8. アルゴリズムを学ぶ
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="py10prime.html">
   9. 整数アルゴリズム
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="py09sort.html">
   10. ソートと計算量
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="py11dict.html">
   11. 辞書を作ってみる
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="py12dp.html">
   12. 動的計画法
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="py13search.html">
   13. 深さ優先探索と幅優先探索
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="py14pil.html">
   14. PNGアニメーション
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="ナビゲーションを切り替え" aria-controls="site-navigation"
                title="ナビゲーションを切り替え" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="このページをダウンロード"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/py07func.ipynb.txt"><button type="button"
                class="btn btn-secondary topbarbtn" title="ソースファイルをダウンロード" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="PDFに印刷"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/kkuramitsu/sphinx"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="ソースリポジトリ"><i
                    class="fab fa-github"></i>リポジトリ</button></a>
        <a class="issues-button"
            href="https://github.com/kkuramitsu/sphinx/issues/new?title=Issue%20on%20page%20%2Fpy07func.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="問題を開く"><i class="fas fa-lightbulb"></i>未解決の問題</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="全画面モード"
        title="全画面モード"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> 目次
            </div>
            <nav id="bd-toc-nav">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#関数を定義する">
   6.1. 関数を定義する
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#関数定義">
     6.1.1. 関数定義
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#値を返さない関数">
     6.1.2. 値を返さない関数
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#再帰とは">
   6.2. 再帰とは
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#繰り返しと再帰関数">
     6.2.1. 繰り返しと再帰関数
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#スタックオーバーフローとは何か？">
     6.2.2. スタックオーバーフローとは何か？
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#閑話休題：入社面談より">
     6.2.3. 閑話休題：入社面談より
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ラムダ式と高階関数★">
   6.3. ラムダ式と高階関数★
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#関数も値">
     6.3.1. 関数も値
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#ラムダ式">
     6.3.2. ラムダ式
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#高階関数">
     6.3.3. 高階関数
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#内包記法と高階関数">
     6.3.4. 内包記法と高階関数
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#演習問題">
   6.4. 演習問題
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#ヒント：Colab上で入力がめんどくさく感じたら">
     6.4.1. ヒント：Colab上で入力がめんどくさく感じたら
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<div class="section" id="関数、再帰関数、そして高階関数">
<h1><span class="section-number">6. </span>関数、再帰関数、そして高階関数<a class="headerlink" href="#関数、再帰関数、そして高階関数" title="このヘッドラインへのパーマリンク">¶</a></h1>
<p>より抽象度の高いプログラミングを目指して、関数、ラムダ式、高階関数の考え方を習得します。</p>
<p><img alt="36f803dfce3548628def7d36729be6cc" src="http://s3.amazonaws.com/lyah/fx.png" /></p>
<div class="section" id="関数を定義する">
<h2><span class="section-number">6.1. </span>関数を定義する<a class="headerlink" href="#関数を定義する" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>今まで、<code class="docutils literal notranslate"><span class="pre">print(x)</span></code>関数や<code class="docutils literal notranslate"><span class="pre">max(x,y)</span></code>を使ってプログラミングをしてきました。 今回は、まず関数を定義する方法を覚えましょう。</p>
<div class="section" id="関数定義">
<h3><span class="section-number">6.1.1. </span>関数定義<a class="headerlink" href="#関数定義" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>関数定義は、<code class="docutils literal notranslate"><span class="pre">def</span></code>文を用いて行います。</p>
<p><strong>関数定義の構文</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">関数名</span><span class="p">(</span><span class="n">パラメータ</span><span class="p">):</span>
  <span class="n">関数本体のコード</span><span class="p">(</span><span class="n">値を計算する</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">値</span>
</pre></div>
</div>
<div class="admonition tip"><p><strong>例題（関数定義）</strong></p>
<p>次の関数を定義してみよう。</p>
<ol class="arabic simple">
<li><p><span class="math notranslate nohighlight">\(f(x) = x + 1\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(f(x) = x + a\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(f(a, b) = \begin{cases}  a &amp; (a&gt;b) \\  b &amp; (otherwise)  \end{cases}\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(f(x) = \begin{cases}  1 &amp; (n=0) \\  x \cdot x^{n-1} &amp; (otherwise)  \end{cases}\)</span></p></li>
</ol>
</div><p><strong>1.</strong>: <span class="math notranslate nohighlight">\(f(x) = x + 1\)</span></p>
<p>パラメータは<code class="docutils literal notranslate"><span class="pre">x</span></code>, 関数の結果は<code class="docutils literal notranslate"><span class="pre">x+1</span></code>になります。 関数の結果は、<code class="docutils literal notranslate"><span class="pre">return</span></code>文を用いて返すようにします。</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span>
</pre></div>
</div>
</div>
<p>一旦、関数を定義してしまうと、あとは、<code class="docutils literal notranslate"><span class="pre">f(0)</span></code>, <code class="docutils literal notranslate"><span class="pre">f(1)</span></code>のように用いることができます。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;f(</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">) =&#39;</span><span class="p">,</span> <span class="n">f</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>

</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
f(0) = 1
f(1) = 2
f(2) = 3
f(3) = 4
f(4) = 5
f(5) = 6
f(6) = 7
f(7) = 8
f(8) = 9
f(9) = 10
</pre></div></div>
</div>
<div class="admonition note">
<p class="admonition-title">関数本体に書けること</p>
<p>Python の関数は、パラメータを受け取り、計算して結果を返すプログラムです。 途中で、任意のPython コードを用いて計算することができます。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;引数&#39;</span><span class="p">:</span> <span class="n">x</span><span class="p">)</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">a</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">return</span></code>が最終的な関数の評価結果になります。 <code class="docutils literal notranslate"><span class="pre">return</span></code>以降のコードは（もし書いてあったとしても）無視されます。</p>
</div>
<p><strong>2</strong>: <span class="math notranslate nohighlight">\(f(x) = x + a\)</span></p>
<p>ちょっと数学にありがちな「その<span class="math notranslate nohighlight">\(a\)</span>はどこから出てきたのかな？」と思ってしまう関数定義です。 次の２通りの実装方法があります。</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">## xもaもパラメータ化する</span>
<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">a</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">## a をグローバル変数にする</span>
<span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">a</span>
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">グローバル変数とローカル変数</p>
<p>グローバル変数は、トップレベルで定義された変数で全ての関数から参照することができる。 一方、ローカル変数は関数内で定義された変数で関数内でのみ参照することができる。</p>
</div>
<p><strong>3.</strong> <span class="math notranslate nohighlight">\(f(a, b) = \begin{cases}  a &amp; (a&gt;b) \\  b &amp; (otherwise)  \end{cases}\)</span></p>
<p>いわゆる<code class="docutils literal notranslate"><span class="pre">max(a,b)</span></code>を定義します。</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">a</span> <span class="o">&gt;</span> <span class="n">b</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">a</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">b</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">a</span> <span class="o">&gt;</span> <span class="n">b</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">a</span>  <span class="c1"># 一度、return したら、それ以降は無視される</span>
    <span class="k">return</span> <span class="n">b</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">a</span> <span class="k">if</span> <span class="n">a</span> <span class="o">&gt;</span> <span class="n">b</span> <span class="k">else</span> <span class="n">b</span>  <span class="c1"># 条件式</span>
</pre></div>
</div>
</div>
<p><strong>4.</strong> <span class="math notranslate nohighlight">\(f(x,n) = \begin{cases}  1 &amp; (n=0) \\  x \cdot x^{n-1} &amp; (otherwise)  \end{cases}\)</span></p>
<p>n乗を計算しています。</p>
<p>ここで、<span class="math notranslate nohighlight">\(f(x, n) = x^{n}\)</span>ということに注意すれば、<span class="math notranslate nohighlight">\(f(x, n) = \begin{cases}  1 &amp; (n=0) \\  x \cdot f(x,n-1) &amp; (otherwise)  \end{cases}\)</span></p>
<p>これを素直に直すと：</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">f</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>  <span class="c1"># 5の3乗</span>
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">再帰関数(recursive function)</p>
<p>自分自身を再度呼び出す関数のこと</p>
</div>
</div>
<div class="section" id="値を返さない関数">
<h3><span class="section-number">6.1.2. </span>値を返さない関数<a class="headerlink" href="#値を返さない関数" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Python の関数は、値を返す必要はありません。 プログラムの機能単位にまとめて、関数を定義することができます。</p>
<div class="admonition tip"><p><strong>例題（長方形の描画）</strong></p>
<p>次の関数を定義してみよう。</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">rect(w,</span> <span class="pre">h)</span></code>: 縦<code class="docutils literal notranslate"><span class="pre">h</span></code>横<code class="docutils literal notranslate"><span class="pre">w</span></code>の長方形を<code class="docutils literal notranslate"><span class="pre">#</span></code>で表示する</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">square(w)</span></code>: 縦<code class="docutils literal notranslate"><span class="pre">w</span></code>横<code class="docutils literal notranslate"><span class="pre">w</span></code>の正方形を<code class="docutils literal notranslate"><span class="pre">#</span></code>表示する</p></li>
</ol>
<p><strong>出力</strong>: <code class="docutils literal notranslate"><span class="pre">rect(4,</span> <span class="pre">3)</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">####</span>
<span class="c1">####</span>
<span class="c1">####</span>
</pre></div>
</div>
</div><p>素直に、二重ループを用いて長方形を書いてみます。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">def</span> <span class="nf">rect</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">h</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">w</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;#&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="c1">#改行なしで #を出力</span>
        <span class="nb">print</span><span class="p">()</span> <span class="c1"># 改行</span>

<span class="n">rect</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
####
####
####
</pre></div></div>
</div>
<p>正方形は、長方形の縦横の長さが等しい場合なので..</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">def</span> <span class="nf">square</span><span class="p">(</span><span class="n">w</span><span class="p">):</span>
    <span class="n">rect</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span>
<span class="n">square</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
#####
#####
#####
#####
#####
</pre></div></div>
</div>
<div class="admonition note">
<p class="admonition-title">関数を作るタイミング</p>
<p>どこをどう関数化するかを判断するのは難しいところです。 最初は、練習をかねて積極的に関数化していきましょう。</p>
</div>
</div>
</div>
<div class="section" id="再帰とは">
<h2><span class="section-number">6.2. </span>再帰とは<a class="headerlink" href="#再帰とは" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p><strong>再帰 (recursion)</strong> とは、あるものについて記述するときに、それ自身への参照が含まれる形式の記述のことです。</p>
<p><strong>例</strong> アメリカ合衆国憲法の条文(抜粋) によるアメリカ市民とは、</p>
<ul class="simple">
<li><p>アメリカ合衆国内で生まれた子供</p></li>
<li><p>もしくは、アメリカ市民の子供</p></li>
</ul>
<p>数学では、漸化式の形式でよくあらわれます。</p>
<p><strong>例</strong>: 階乗 <span class="math notranslate nohighlight">\(a_n = n!\)</span></p>
<p><span class="math notranslate nohighlight">\(a_n = \begin{cases}  1 &amp; (n=1) \\  n \cdot a_{n-1} &amp; (n&gt;1)  \end{cases}\)</span></p>
<div class="section" id="繰り返しと再帰関数">
<h3><span class="section-number">6.2.1. </span>繰り返しと再帰関数<a class="headerlink" href="#繰り返しと再帰関数" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>繰り返しは、「再帰関数で書き直せますよ」という話を例題で示します。</p>
<div class="admonition tip"><p><strong>例題（階乗）</strong></p>
<p><span class="math notranslate nohighlight">\(n!\)</span>を求める関数<code class="docutils literal notranslate"><span class="pre">factorial(n)</span></code>を定義してみよう。</p>
</div><p>まず、繰り返しで解いてみます。</p>
<div class="math notranslate nohighlight">
\[n! = n \times n-1 \times ... \times 2 \times 1\]</div>
<p>なので、<span class="math notranslate nohighlight">\(\times\)</span>の数に注目すると、<span class="math notranslate nohighlight">\(n-1\)</span>回、掛け算することになります。 繰り返す回数がわかれば、あとは<span class="math notranslate nohighlight">\(N\)</span>回繰り返す構文を用いて計算します。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">def</span> <span class="nf">factorial</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">result</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">i</span> <span class="o">*</span> <span class="n">result</span>
    <span class="k">return</span> <span class="n">result</span>
<span class="nb">print</span><span class="p">(</span><span class="n">factorial</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>

</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
120
</pre></div></div>
</div>
<p>再帰関数による解法</p>
<p><span class="math notranslate nohighlight">\(factorinal(n)=n!\)</span>なので、</p>
<p><span class="math notranslate nohighlight">\(factorial(n) = \begin{cases}  1 &amp; (n=1) \\  n \cdot factorial(n-1) &amp; (n&gt;1)  \end{cases}\)</span></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">def</span> <span class="nf">factorial</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">n</span> <span class="o">*</span> <span class="n">factorial</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">factorial</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
120
</pre></div></div>
</div>
<div class="admonition note">
<p class="admonition-title">再帰構造とループ</p>
<p>再帰構造はループ (while 文, for 文) とプログラム意味論的には等価です。</p>
<ul class="simple">
<li><p>ループは再帰で書き直すことができる.</p></li>
<li><p>再帰はループで書き直すことができる.</p></li>
</ul>
</div>
<p>どちらが良いか?</p>
<p>プログラマは、次のように派閥がわかれています。</p>
<ul class="simple">
<li><p><strong>ループ派:</strong> まずはループで書く</p></li>
<li><p><strong>再帰派:</strong> とにかく何でも再帰で書く</p></li>
</ul>
<p><strong>ループの利点</strong></p>
<ul class="simple">
<li><p>性能がよい</p></li>
<li><p><strong>スタックオーバーフロー (stack overflow)</strong> を心配しなくてよい.</p></li>
</ul>
<p><strong>再帰の利点</strong></p>
<ul class="simple">
<li><p>コードから、数学的な意味が把握しやすい</p></li>
<li><p>末尾再帰の最適化がない言語は使わなければよい（意味不明）</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">注意</p>
<p>倉光は再帰派（少数）なので、再帰に対し好意的です。</p>
</div>
</div>
<div class="section" id="スタックオーバーフローとは何か？">
<h3><span class="section-number">6.2.2. </span>スタックオーバーフローとは何か？<a class="headerlink" href="#スタックオーバーフローとは何か？" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>再帰関数を書くときは、スタックオーバーフローに注意しましょう。</p>
<p>スタック・オーバーフロー (stack overflow) は、再帰関数に限らずに関数のコールスタックを使い切ったときに発生します。プログラミングでは、わりとよく発生するバグです。</p>
<div class="admonition note">
<p class="admonition-title">コールスタック</p>
<p>プログラミング言語は、関数の引数やローカル変数はスタックデータ構造に保存しています。</p>
<ul class="simple">
<li><p>関数を適用(コールする)と、引数とローカル変数は push される</p></li>
<li><p>関数をリターンすると、pop される</p></li>
</ul>
<p>コールスタックは有限なのでスタック・オーバーフローが発生します。</p>
</div>
<p>コールスタックと再帰関数の関係は、最初の <code class="docutils literal notranslate"><span class="pre">factorial(n)</span></code>に<code class="docutils literal notranslate"><span class="pre">print()</span></code>を入れて、確認しておきましょう。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">def</span> <span class="nf">factorial</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;引数</span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s1">でコール&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">res</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">n</span> <span class="o">*</span> <span class="n">factorial</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;n=</span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s1">の結果として</span><span class="si">{</span><span class="n">res</span><span class="si">}</span><span class="s1">を返す&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">res</span>

<span class="nb">print</span><span class="p">(</span><span class="n">factorial</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
引数5でコール
引数4でコール
引数3でコール
引数2でコール
引数1でコール
n=1の結果として1を返す
n=2の結果として2を返す
n=3の結果として6を返す
n=4の結果として24を返す
n=5の結果として120を返す
120
</pre></div></div>
</div>
<div class="admonition note">
<p class="admonition-title">Let’s Try</p>
<p>スタックオーバーフローを発生させてみましょう</p>
</div>
<p>再帰関数では簡単に発生します。例えば、<code class="docutils literal notranslate"><span class="pre">factorial(-1)</span></code>などを呼んでみると、いつまでも再帰呼び出しを続けて、コールスタックを使い切ります。</p>
<p>実行するときは、<code class="docutils literal notranslate"><span class="pre">print()</span></code>はコメントアウトしておいた方がよいかも。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">def</span> <span class="nf">factorial</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="c1">#print(f&#39;引数{n}でコール&#39;)</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">res</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">n</span> <span class="o">*</span> <span class="n">factorial</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="c1">#print(f&#39;n={n}の結果として{res}を返す&#39;)</span>
    <span class="k">return</span> <span class="n">res</span>

<span class="nb">print</span><span class="p">(</span><span class="n">factorial</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">RecursionError</span>                            Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-15-2a6fc6f38288&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-intense-fg ansi-bold">      8</span>     <span class="ansi-green-fg">return</span> res
<span class="ansi-green-intense-fg ansi-bold">      9</span>
<span class="ansi-green-fg">---&gt; 10</span><span class="ansi-red-fg"> </span>print<span class="ansi-blue-fg">(</span>factorial<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">-</span><span class="ansi-cyan-fg">1</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">&lt;ipython-input-15-2a6fc6f38288&gt;</span> in <span class="ansi-cyan-fg">factorial</span><span class="ansi-blue-fg">(n)</span>
<span class="ansi-green-intense-fg ansi-bold">      4</span>         res <span class="ansi-blue-fg">=</span> <span class="ansi-cyan-fg">1</span>
<span class="ansi-green-intense-fg ansi-bold">      5</span>     <span class="ansi-green-fg">else</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">----&gt; 6</span><span class="ansi-red-fg">         </span>res <span class="ansi-blue-fg">=</span> n <span class="ansi-blue-fg">*</span> factorial<span class="ansi-blue-fg">(</span>n<span class="ansi-blue-fg">-</span><span class="ansi-cyan-fg">1</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">      7</span>     <span class="ansi-red-fg">#print(f&#39;n={n}の結果として{res}を返す&#39;)</span>
<span class="ansi-green-intense-fg ansi-bold">      8</span>     <span class="ansi-green-fg">return</span> res

... last 1 frames repeated, from the frame below ...

<span class="ansi-green-fg">&lt;ipython-input-15-2a6fc6f38288&gt;</span> in <span class="ansi-cyan-fg">factorial</span><span class="ansi-blue-fg">(n)</span>
<span class="ansi-green-intense-fg ansi-bold">      4</span>         res <span class="ansi-blue-fg">=</span> <span class="ansi-cyan-fg">1</span>
<span class="ansi-green-intense-fg ansi-bold">      5</span>     <span class="ansi-green-fg">else</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">----&gt; 6</span><span class="ansi-red-fg">         </span>res <span class="ansi-blue-fg">=</span> n <span class="ansi-blue-fg">*</span> factorial<span class="ansi-blue-fg">(</span>n<span class="ansi-blue-fg">-</span><span class="ansi-cyan-fg">1</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">      7</span>     <span class="ansi-red-fg">#print(f&#39;n={n}の結果として{res}を返す&#39;)</span>
<span class="ansi-green-intense-fg ansi-bold">      8</span>     <span class="ansi-green-fg">return</span> res

<span class="ansi-red-fg">RecursionError</span>: maximum recursion depth exceeded in comparison
</pre></div></div>
</div>
<div class="admonition warning">
<p class="admonition-title">RecursionError: スタックオーバーフローのこと</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ne">RecursionError</span><span class="p">:</span> <span class="n">maximum</span> <span class="n">recursion</span> <span class="n">depth</span> <span class="n">exceeded</span> <span class="ow">in</span> <span class="n">comparison</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="閑話休題：入社面談より">
<h3><span class="section-number">6.2.3. </span>閑話休題：入社面談より<a class="headerlink" href="#閑話休題：入社面談より" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>google関数は、研究室の学生が過去 G 社の入社面談を受けたとき、ホワイトボードの前で「ちょっと書いてみて」と聞かれた設問です。</p>
<div class="admonition note">
<p class="admonition-title">ホワイトボード・コーディング</p>
<p>面接でプログラミング力を試させること。 ただ、書くだけでなく、エレガントなコーディングやセンスも問われる。</p>
</div>
<div class="admonition tip"><p><strong>課題（入社面談より）</strong></p>
<p>整数 x を反転させる関数 g(x) を定義してみてください。</p>
<p><strong>g(x) の例</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="mi">12</span><span class="p">))</span>   <span class="c1"># =&gt; 21</span>
<span class="nb">print</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="mi">1234</span><span class="p">))</span> <span class="c1"># =&gt; 4321</span>
<span class="nb">print</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="mi">90</span><span class="p">))</span>   <span class="c1"># =&gt; 9</span>
</pre></div>
</div>
</div><p>次回、回答例を示しますので、腕試しで <code class="docutils literal notranslate"><span class="pre">g(x)</span></code> を定義してみよう。 もちろん、エレガントかどうかは置いておいて、コーディングセンスも問われます。</p>
</div>
</div>
<div class="section" id="ラムダ式と高階関数★">
<h2><span class="section-number">6.3. </span>ラムダ式と高階関数★<a class="headerlink" href="#ラムダ式と高階関数★" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>ラムダ式や高階関数は、もともと<a class="reference external" href="https://ja.wikipedia.org/wiki/関数型プログラミング">関数型プログラミング言語</a>に由来し、Python では上級？技法（少なくとも初心者むけの技法ではない）に位置するものです。</p>
<p>だから、飛ばしてもらっても構いませんと言いたいところですが、３年生むけのデータサイエンスや機械学習では、容赦なく使われるのでやはりここでしっかり抑えておいて欲しいです。</p>
<div class="admonition note">
<p class="admonition-title">この章</p>
<p>知っておいて欲しいけど</p>
</div>
<div class="section" id="関数も値">
<h3><span class="section-number">6.3.1. </span>関数も値<a class="headerlink" href="#関数も値" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Python3 は、関数自体も整数や文字列などと同じく、値として扱えるようになっていま す。このような関数のことを、<strong>第一級オブジェクト (first-class object)</strong> とも呼びます。</p>
<p>まず、関数が値であるとはどういうことなのか確認しておきましょう。数値をひとつ増やす succ(n) 関数を定義してみた例をみてください。</p>
<p><strong>関数 succ(n) の定義</strong></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">def</span> <span class="nf">succ</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span><span class="o">+</span><span class="mi">1</span>

<span class="nb">print</span><span class="p">(</span><span class="n">succ</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
1
</pre></div></div>
</div>
<p>関数は、<code class="docutils literal notranslate"><span class="pre">succ(0)</span></code> のように引数を適用することで呼び出すことができます。実は、ここ で <code class="docutils literal notranslate"><span class="pre">succ</span></code> という識別子は<strong>関数を値として保持している変数名</strong>にもなっています。だから、 <code class="docutils literal notranslate"><span class="pre">type(succ)</span></code> とすると、その値の型を調べることができます。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">type</span><span class="p">(</span><span class="n">succ</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
function
</pre></div></div>
</div>
<p>関数は、変数名 <code class="docutils literal notranslate"><span class="pre">succ</span></code> に代入された値なので、整数や文字列と同じように他の変数に代入することができます。すると、代入された変数名の方から、<code class="docutils literal notranslate"><span class="pre">succ</span></code> 関数を呼び出せるようになります。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">f</span> <span class="o">=</span> <span class="n">succ</span>
<span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
1
</pre></div></div>
</div>
<p><strong>注意</strong>: 変数 <code class="docutils literal notranslate"><span class="pre">f</span></code> は、<code class="docutils literal notranslate"><span class="pre">succ</span></code> と同じ関数を参照しているため、<code class="docutils literal notranslate"><span class="pre">f(0)</span></code> は <code class="docutils literal notranslate"><span class="pre">succ(0)</span></code> と同じ結果となります。</p>
</div>
<div class="section" id="ラムダ式">
<h3><span class="section-number">6.3.2. </span>ラムダ式<a class="headerlink" href="#ラムダ式" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>ラムダ式 (lambda expression) は、関数を値として、直接定義する記法です。関数名を 付ける必要はないため、無名関数とも呼ばれます。先ほどの succ 関数は、ラムダ式を用いると、 次のように直接、値として書き直すことができます。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">g</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">+</span><span class="mi">1</span>
<span class="nb">print</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
2
</pre></div></div>
</div>
<p>ラムダ式は、Aronzo Church の λ 計算 (λx.x + 1) に由来していますが、プログラミン グ言語のラムダ式は、単に、関数を値として定義するための記法に過ぎません。β 簡約や Church 数などを理解しなくとも、恐れるところはありません。</p>
<p>Python3 のラムダ式は、式しか与えることができません。つまり、制御構造などが含まれたプログラムは、ラムダ式として定義することはできず、<code class="docutils literal notranslate"><span class="pre">def</span> <span class="pre">succ(n):</span></code> の例のように、名前付きの関数として一旦、定義し、関数名から参照することになります。</p>
</div>
<div class="section" id="高階関数">
<h3><span class="section-number">6.3.3. </span>高階関数<a class="headerlink" href="#高階関数" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><strong>高階関数 (high-order function)</strong> とは、「関数をパラメータにとる関数」のことです。関数が値として変数に代入できるなら、当然、関数もパラメータにできるわけですが、結果として、より抽象度の高い関数が定義できるようになります。</p>
<p>ここでは、代表的な高階関数である map 関数と filter 関数を例に高階関数の仕組みを理解していきましょう。</p>
<p><strong>map関数</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">map(f,xs)</span></code> のパラメータは、関数 <code class="docutils literal notranslate"><span class="pre">f</span></code> とリスト <code class="docutils literal notranslate"><span class="pre">xs</span></code> をとります。リスト<code class="docutils literal notranslate"><span class="pre">xs</span></code>から、 順番に要素を取り出し、各要素に関数 <code class="docutils literal notranslate"><span class="pre">f</span></code> を適用します。最終的に、新しいリストに関数 <code class="docutils literal notranslate"><span class="pre">f</span></code> の適用した結果を入れて、返します。</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">def</span> <span class="nf">map</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">xs</span><span class="p">)</span> <span class="p">:</span>
    <span class="n">mapped</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">xs</span><span class="p">:</span>
        <span class="n">mapped</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">mapped</span>
</pre></div>
</div>
</div>
<p>パラメータで渡せる関数は、定義済みの関数名、もしくはラムダ式になります。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">map</span><span class="p">(</span><span class="n">succ</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[2, 3, 4]
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[2, 4, 6]
</pre></div></div>
</div>
<p><strong>filter関数</strong></p>
<p>filter(f,xs) のパラメータは、関数 <code class="docutils literal notranslate"><span class="pre">f</span></code> とリスト <code class="docutils literal notranslate"><span class="pre">xs</span></code> をとります。リスト<code class="docutils literal notranslate"><span class="pre">xs</span></code>から、 順番に要素を取り出し、各要素に関数 f でフィルタします。最終的に、関数<code class="docutils literal notranslate"><span class="pre">f</span></code>の適用結果が真だった要素だけのリストを作り、結果として返します。</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">def</span> <span class="nf">filter</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">xs</span><span class="p">)</span> <span class="p">:</span>
    <span class="n">filtered</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">xs</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
            <span class="n">filtered</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">filtered</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[1, 3]
</pre></div></div>
</div>
<p>なお、Python3 では、map 関数と filter 関数は組み込み関数として定義されているため、ふだんは自分で定義する必要はありません。</p>
<div class="admonition note">
<p class="admonition-title">Let’s try</p>
<p>そろそろ、おなじみの<code class="docutils literal notranslate"><span class="pre">map(int,</span> <span class="pre">input().split())</span></code>がどんな処理をしているか説明できますね。</p>
</div>
</div>
<div class="section" id="内包記法と高階関数">
<h3><span class="section-number">6.3.4. </span>内包記法と高階関数<a class="headerlink" href="#内包記法と高階関数" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>最後に、リスト内包記法は<code class="docutils literal notranslate"><span class="pre">map()</span></code>関数と<code class="docutils literal notranslate"><span class="pre">filter()</span></code>関数が融合した構文だと言うことを確認しておきましょう。</p>
<p><strong>外延定義</strong>: <span class="math notranslate nohighlight">\(A = \{ 1, 2, 3, 5, 8, 13, 21, 34, 55 \}\)</span></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">A</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">55</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>内包定義</strong>: <span class="math notranslate nohighlight">\(B = \{ 2x | x \in A \}\)</span></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">B</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="o">*</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">A</span><span class="p">]</span>
<span class="n">B</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">x</span><span class="p">,</span> <span class="n">A</span><span class="p">)</span>  <span class="c1"># mapの描き直し</span>
</pre></div>
</div>
<p><strong>内包定義</strong>: <span class="math notranslate nohighlight">\(C = \{ x | x \in A, \mbox{xは奇数} \}\)</span></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">C</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">A</span>　<span class="k">if</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span><span class="p">]</span>
<span class="n">C</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span><span class="p">,</span> <span class="n">A</span><span class="p">))</span>  <span class="c1"># filter版</span>
</pre></div>
</div>
<p><strong>内包定義</strong>: <span class="math notranslate nohighlight">\(D = \{ 2x | x \in A, \mbox{xは奇数} \}\)</span></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">D</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span> <span class="o">*</span> <span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">A</span>　<span class="k">if</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span><span class="p">]</span>
<span class="n">D</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="mi">2</span><span class="o">*</span><span class="n">x</span><span class="p">,</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span><span class="p">,</span> <span class="n">A</span><span class="p">)))</span>  <span class="c1"># map,fliter版</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">内包記法</p>
<p>高階関数のmap()とfilter()をミックスしたことが簡単に書けます。 Pythonでは、内包記法を積極的に活用していきましょう。</p>
</div>
</div>
</div>
<div class="section" id="演習問題">
<h2><span class="section-number">6.4. </span>演習問題<a class="headerlink" href="#演習問題" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>できる限り、関数を定義して使っていきましょう。</p>
<ul class="simple">
<li><p><a class="reference external" href="https://atcoder.jp/contests/abc183/tasks/abc183_a">ReLU</a></p></li>
<li><p><a class="reference external" href="https://atcoder.jp/contests/abc172/tasks/abc172_a">a+a2+a3</a>: 関数定義しましょう！</p></li>
<li><p><a class="reference external" href="https://atcoder.jp/contests/past202004-open/tasks/past202004_a">エレベーター</a>: <code class="docutils literal notranslate"><span class="pre">1F,</span> <span class="pre">2F,</span> <span class="pre">3F</span></code>を渡すと、数値に変換する関数を考えます。</p></li>
<li><p><a class="reference external" href="https://atcoder.jp/contests/abc187/tasks/abc187_a">大きい数字</a></p></li>
<li><p><a class="reference external" href="https://atcoder.jp/contests/abc083/tasks/abc083_b">とある総和</a></p></li>
<li><p><a class="reference external" href="https://atcoder.jp/contests/abc090/tasks/abc090_b">回文数</a></p></li>
<li><p><a class="reference external" href="https://atcoder.jp/contests/abc156/tasks/abc156_b">K進数</a>: K進数に変換する関数を定義</p></li>
<li><p><a class="reference external" href="https://atcoder.jp/contests/abc185/tasks/abc185_b">スマホ中毒</a>: 入力がめんどくさいので、<strong>ヒント</strong>を読もう</p></li>
<li><p><a class="reference external" href="https://atcoder.jp/contests/abc182/tasks/abc182_b">ほぼGCD</a>: 正直、問題文の理解が一番むずかしい</p></li>
<li><p><a class="reference external" href="https://atcoder.jp/contests/abc162/tasks/abc162_b">FizzBuzzの和</a>: 有名なFizzBuzz問題のバリエーション</p></li>
<li><p><a class="reference external" href="https://atcoder.jp/contests/abc155/tasks/abc155_b">入国審査</a></p></li>
<li><p><a class="reference external" href="https://atcoder.jp/contests/abc157/tasks/abc157_b">ビンゴ</a>: ビンゴを判定する関数定義しましょう</p></li>
<li><p><a class="reference external" href="https://atcoder.jp/contests/abc156/tasks/abc156_c">ラリー</a></p></li>
<li><p><a class="reference external" href="https://atcoder.jp/contests/abc107/tasks/abc107_b">グリッド圧縮</a></p></li>
<li><p><a class="reference external" href="https://atcoder.jp/contests/abc019/tasks/abc019_2">文字列圧縮</a>: ランレングス圧縮を関数化します。</p></li>
<li><p><a class="reference external" href="https://atcoder.jp/contests/abc114/tasks/abc114_c">７５５</a> 再帰関数を使います</p></li>
</ul>
<div class="section" id="ヒント：Colab上で入力がめんどくさく感じたら">
<h3><span class="section-number">6.4.1. </span>ヒント：Colab上で入力がめんどくさく感じたら<a class="headerlink" href="#ヒント：Colab上で入力がめんどくさく感じたら" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Colab上で入力がめんどくさく感じたら、少し<strong>禁断のテクニック</strong>ですが、 <code class="docutils literal notranslate"><span class="pre">input()</span></code>関数を書き換えてしまいましょう。</p>
<p>次のIn関数は、与えられた文字列を1行ずつ<code class="docutils literal notranslate"><span class="pre">input()</span></code>に渡すようにする 関数です。</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">def</span> <span class="nf">In</span><span class="p">(</span><span class="n">s</span><span class="p">):</span> <span class="c1">#Colab上で最初に一度定義する。</span>
  <span class="k">global</span> <span class="nb">input</span>
  <span class="kn">import</span> <span class="nn">builtins</span>
  <span class="n">data</span>  <span class="o">=</span> <span class="p">[</span><span class="n">line</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">s</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span>
  <span class="k">def</span> <span class="nf">input_new</span><span class="p">():</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
      <span class="k">return</span> <span class="n">data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="nb">input</span> <span class="o">=</span> <span class="n">builtins</span><span class="o">.</span><span class="n">input</span> <span class="c1"># 元に戻す</span>
      <span class="k">return</span> <span class="n">builtins</span><span class="o">.</span><span class="n">input</span><span class="p">()</span>
  <span class="nb">input</span> <span class="o">=</span> <span class="n">input_new</span>
</pre></div>
</div>
</div>
<p>複数行にわたる入力文字列もトリプルクート(<code class="docutils literal notranslate"><span class="pre">'''</span></code>)で囲んで渡すと、<code class="docutils literal notranslate"><span class="pre">input()</span></code>を置き換えます。</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">In</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">10 2 20</span>
<span class="s1">9 11</span>
<span class="s1">13 17</span>
<span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>すると、渡した入力文字列がある間は、順番に渡されるようになります。</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">input</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&#39;10 2 20&#39;
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">input</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&#39;9 11&#39;
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">input</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&#39;13 17&#39;
</pre></div></div>
</div>
<div class="admonition warning">
<p class="admonition-title">必ずいるので注意</p>
<p>AtCoder に提出するときは、<code class="docutils literal notranslate"><span class="pre">In(...)</span></code>の部分は入れないでください。 <code class="docutils literal notranslate"><span class="pre">input()</span></code>を書き換えるので、正しくAtCoderの入力が読めなくなります。</p>
</div>
</div>
</div>
</div>


              </div>
              
        
        <div class='prev-next-bottom'>
            
    <a class='left-prev' id="prev-link" href="py05string.html" title="previous page"><span class="section-number">5. </span>文字と情報</a>
    <a class='right-next' id="next-link" href="py06tips.html" title="next page"><span class="section-number">7. </span>プログラミング上達のコツ</a>

        </div>
        
        </div>
    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          沿って Kimio Kuramitsu<br/>
        
            &copy; 著作権 2021, 倉光君郎(Kimio Kuramitsu).<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
  </body>
</html>